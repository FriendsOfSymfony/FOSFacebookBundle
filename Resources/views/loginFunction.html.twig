function fbLogin(callbackFnc, notAuthCallbackFnc){
  	if (typeof (FB) != 'undefined' && FB != null) {
  		FB.getLoginStatus(function(response) {
  			if (response.status === 'connected') {
  				var accessToken = response.authResponse.accessToken;
  				$.post("{{ path('fbWriteAuthInSession') }}", {
  					"accessToken" : accessToken
  				}, function(response) {
  					if (response.accessToken == accessToken) {
  					    $.oauthpopup({
                			path : "{{ path(loginCheck) }}" + "?facebook=true",
                			callback : callbackFnc
                		});
  					}
  				});
  			} else if (response.status === 'not_authorized') {
  				// the user is logged in to Facebook,
  				// but has not authenticated your app
  				if (typeof fnc === "undefined" || fnc===null)
                   notAuthCallbackFnc = function(){};
  				notAuthCallbackFnc();
  			} else {
  			    $.oauthpopup({
        			path : "{{ facebook_login_url(url(loginCheck)) }}",
        			callback : callbackFnc
        		});
  			}
  		});
  	} 
  }